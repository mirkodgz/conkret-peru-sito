---

---

<header class="header">
    <div class="container header-content">
        <a href="/" class="logo">
            <img
                src="https://res.cloudinary.com/dskliu1ig/image/upload/v1769642781/ck-logo-peru_ahpncd.webp"
                alt="CONKRET Logo"
                width="150"
                height="50"
            />
        </a>
        <nav class="nav">
            <ul>
                <li><a href="/">INICIO</a></li>
                <li class="dropdown">
                    <a href="/productos/" class="dropdown-toggle">
                        PRODUCTOS
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="14"
                            height="14"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="3"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="chevron-down"
                            ><path d="m6 9 6 6 6-6"></path></svg
                        >
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="/concreto-listo/">Concreto Listo</a></li>
                        <li><a href="/mortero/">Mortero</a></li>
                        <li>
                            <a href="/mezclas-especiales/">Mezclas Especiales</a
                            >
                        </li>
                        <li class="divider"></li>
                        <li><a href="/productos/">Ver Todo el Catálogo</a></li>
                    </ul>
                </li>
                <li><a href="/proyectos/">PROYECTOS</a></li>
                <li><a href="/blog/">BLOG</a></li>
                <li><a href="/contacto/">UBIQUENOS</a></li>
            </ul>
        </nav>
        <div class="header-cta desktop-only">
            <a href="/cotiza/" class="btn-header-cotiza"> COTIZA AQUÍ </a>
        </div>

        <button
            class="mobile-menu-btn"
            aria-label="Toggle Menu"
            id="mobile-menu-toggle"
        >
            <span class="line"></span>
            <span class="line"></span>
        </button>
    </div>
</header>

<!-- Modern Mobile Menu Overlay (Moved outside header for proper fixed positioning) -->
<div class="mobile-nav-panel" id="mobile-nav-panel">
    <div class="mobile-nav-content">
        <div class="mobile-nav-header">
            <img
                src="https://res.cloudinary.com/dskliu1ig/image/upload/v1769642781/ck-logo-peru_ahpncd.webp"
                alt="Logo"
                class="mobile-logo"
            />
            <button
                id="mobile-menu-close"
                class="mobile-menu-close-btn"
                aria-label="Close Menu"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    ><path d="M18 6 6 18"></path><path d="m6 6 12 12"
                    ></path></svg
                >
            </button>
        </div>

        <nav class="mobile-main-nav">
            <a href="/">INICIO</a>
            <div class="mobile-has-submenu">
                <div class="mobile-menu-row">
                    <a href="/productos/" class="mobile-link">PRODUCTOS</a>
                    <button
                        class="mobile-submenu-trigger"
                        aria-label="Toggle Submenu"
                    >
                        <svg
                            viewBox="0 0 24 24"
                            class="chevron"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2.5"
                            ><path d="m6 9 6 6 6-6"></path></svg
                        >
                    </button>
                </div>
                <div class="mobile-submenu-list">
                    <a href="/concreto-listo/">Concreto Listo</a>
                    <a href="/mortero/">Mortero</a>
                    <a href="/mezclas-especiales/">Mezclas Especiales</a>
                    <a href="/productos/" class="see-all"
                        >Ver Todo el Catálogo</a
                    >
                </div>
            </div>
            <a href="/proyectos/">PROYECTOS</a>
            <a href="/blog/">BLOG</a>
            <a href="/contacto/">UBIQUENOS</a>
            <a href="/cotiza/" class="mobile-cta-link">COTIZA</a>
        </nav>
    </div>
</div>

<script>
    document.addEventListener("astro:page-load", () => {
        const menuToggle = document.getElementById("mobile-menu-toggle");
        const menuClose = document.getElementById("mobile-menu-close");
        const navPanel = document.getElementById("mobile-nav-panel");
        const submenuTriggers = document.querySelectorAll(
            ".mobile-submenu-trigger",
        );

        const toggleMenu = () => {
            const isOpen = navPanel?.classList.toggle("is-open");
            menuToggle?.classList.toggle("is-open");
            document.body.style.overflow = isOpen ? "hidden" : "";
        };

        menuToggle?.addEventListener("click", toggleMenu);
        menuClose?.addEventListener("click", toggleMenu);

        submenuTriggers.forEach((trigger) => {
            trigger.addEventListener("click", (e) => {
                const row = trigger.closest(".mobile-menu-row");
                // @ts-ignore
                const list = row?.nextElementSibling;

                trigger.classList.toggle("is-active");
                list?.classList.toggle("is-active");

                if (list) {
                    if (list.classList.contains("is-active")) {
                        // @ts-ignore
                        list.style.height = list.scrollHeight + "px";
                    } else {
                        // @ts-ignore
                        list.style.height = "0";
                    }
                }
            });
        });

        // Close menu on link click
        const mobileLinks = navPanel?.querySelectorAll("a");
        mobileLinks?.forEach((link) => {
            link.addEventListener("click", () => {
                navPanel?.classList.remove("is-open");
                menuToggle?.classList.remove("is-open");
                document.body.style.overflow = "";
            });
        });

        // Header Scroll Effect
        const header = document.querySelector(".header");
        const handleScroll = () => {
            if (window.scrollY > 20) {
                header?.classList.add("is-scrolled");
            } else {
                header?.classList.remove("is-scrolled");
            }
        };

        window.removeEventListener("scroll", handleScroll);
        window.addEventListener("scroll", handleScroll);
    });
</script>

<style>
    .header {
        padding: 1rem 0;
        position: sticky;
        top: 0;
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        z-index: 1000;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    }

    .header::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 3px;
        background: var(--color-primary);
        transform: scaleX(1);
        transform-origin: left;
    }

    .header.is-scrolled {
        padding: 0.6rem 0;
        background: rgba(255, 255, 255, 0.98);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
    }
    .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .logo img {
        height: 48px;
        width: auto;
    }

    .nav > ul {
        display: flex;
        list-style: none;
        gap: 1.5rem;
        align-items: center;
        margin: 0;
        padding: 0;
    }
    .nav a {
        font-family: "Spline Sans", sans-serif;
        font-weight: 600;
        font-size: 0.9rem;
        color: #1a1a1a;
        text-transform: uppercase;
        letter-spacing: 0.02em;
        transition: color 0.3s ease;
    }
    .nav a:hover {
        color: var(--color-primary);
    }

    .nav-cta {
        background: var(--color-primary);
        color: white !important;
        padding: 0.5rem 1.25rem;
        border-radius: 6px;
        font-weight: 700 !important;
        transition: transform 0.2s;
        display: inline-block;
    }
    .nav-cta:hover {
        transform: scale(1.05);
    }

    /* Desktop Dropdown */
    .dropdown {
        position: relative;
    }
    .dropdown-toggle {
        display: flex;
        align-items: center;
        gap: 6px;
        cursor: pointer;
    }
    .dropdown-menu {
        position: absolute;
        top: 100%;
        left: 50%;
        transform: translateX(-50%) translateY(15px);
        background: white;
        min-width: 240px;
        border-radius: 12px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
        padding: 0.75rem;
        opacity: 0;
        visibility: hidden;
        transition: all 0.25s cubic-bezier(0.23, 1, 0.32, 1);
        z-index: 1001;
    }
    .dropdown:hover .dropdown-menu {
        opacity: 1;
        visibility: visible;
        transform: translateX(-50%) translateY(8px);
    }
    .dropdown-menu a {
        font-family: "Spline Sans", sans-serif;
        padding: 0.8rem 1rem;
        border-radius: 8px;
        font-size: 0.9rem;
        text-transform: none;
        display: block;
    }
    .dropdown-menu a:hover {
        background: #f8f8f8;
        transform: translateX(4px);
    }

    /* Mobile Toggle */
    .mobile-menu-btn {
        display: none;
        width: 48px; /* Increased touch target */
        height: 48px;
        flex-direction: column;
        justify-content: center;
        align-items: flex-end;
        gap: 8px;
        background: none;
        border: none;
        z-index: 2001;
        cursor: pointer;
        padding: 5px; /* Add padding for easier clicking */
    }
    .line {
        width: 28px;
        height: 2.5px;
        background: #1a1a1a;
        border-radius: 4px;
        transition: all 0.3s cubic-bezier(0.68, -0.6, 0.32, 1.6);
    }
    .line:last-child {
        width: 18px;
    }
    .mobile-menu-btn.is-open .line:first-child {
        transform: translateY(5px) rotate(45deg);
        width: 28px;
    }
    .mobile-menu-btn.is-open .line:last-child {
        transform: translateY(-5.5px) rotate(-45deg);
        width: 28px;
    }

    /* Modern Mobile Menu Panel */
    .mobile-nav-panel {
        position: fixed;
        top: 0;
        right: 0;
        width: 100%;
        height: 100dvh;
        background: white;
        z-index: 2000;
        transform: translateX(105%);
        transition: transform 0.5s cubic-bezier(0.32, 0.72, 0, 1);
        display: none; /* Only show on mobile */
    }
    .mobile-nav-panel.is-open {
        transform: translateX(0);
    }
    .mobile-nav-content {
        padding: 2rem;
        height: 100%;
        display: flex;
        flex-direction: column;
    }
    .mobile-nav-header {
        margin-bottom: 3rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .mobile-logo {
        height: 32px; /* Reduced from 40px */
        width: auto;
    }

    .mobile-menu-close-btn {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: none;
        background: #f1f1f1;
        border-radius: 50%;
        color: #1a1a1a;
        cursor: pointer;
    }

    .mobile-main-nav {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        flex: 1;
    }
    .mobile-menu-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        border-bottom: 1px solid rgba(0, 0, 0, 0.05); /* Subtle separator */
    }

    .mobile-main-nav a,
    .mobile-link {
        font-size: 20px;
        font-family: "Spline Sans", sans-serif;
        font-weight: 800;
        color: #1a1a1a;
        padding: 1rem 0;
        text-transform: uppercase;
        display: block;
        width: 100%;
        border-bottom: 1px solid rgba(0, 0, 0, 0.03);
    }

    .mobile-submenu-trigger {
        background: transparent;
        border: none;
        padding: 0 1rem;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #1a1a1a;
        cursor: pointer;
    }

    .mobile-submenu-trigger .chevron {
        width: 24px;
        height: 24px;
        transition: transform 0.3s;
    }
    .mobile-submenu-trigger.is-active .chevron {
        transform: rotate(180deg);
    }

    .mobile-submenu-list {
        height: 0;
        overflow: hidden;
        transition: height 0.3s ease;
        display: flex;
        flex-direction: column;
        padding-left: 0;
    }
    .mobile-submenu-list.is-active {
        padding-bottom: 1rem;
    }
    .mobile-submenu-list a {
        font-size: 1.1rem;
        font-weight: 600;
        color: #666;
        padding: 0.5rem 0;
        text-transform: none;
    }
    .see-all {
        color: var(--color-primary) !important;
        margin-top: 0.5rem;
    }

    .mobile-nav-footer {
        margin-top: auto;
        padding-top: 2rem;
    }
    .footer-tagline {
        color: #888;
        margin-bottom: 1rem;
        font-size: 1rem;
    }
    .mobile-whatsapp-btn {
        background: #25d366;
        color: white;
        padding: 1rem;
        border-radius: 100px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        text-decoration: none;
        box-shadow: 0 10px 20px rgba(37, 211, 102, 0.2);
    }

    .btn-header-cotiza {
        font-family: "Spline Sans", sans-serif;
        background: var(--color-primary);
        color: white;
        padding: 0.75rem 1.8rem;
        border-radius: 100px;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-weight: 700;
        box-shadow: 0 4px 15px rgba(var(--color-primary-rgb), 0.3);
        transition: all 0.3s ease;
    }
    .btn-header-cotiza:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(var(--color-primary-rgb), 0.4);
        color: white;
    }

    @media (max-width: 992px) {
        .header {
            padding: 0.5rem 0;
        }
        .logo img {
            height: 36px;
        }
        .nav,
        .desktop-only {
            display: none;
        }
        .mobile-menu-btn {
            display: flex;
        }
        .mobile-nav-panel {
            display: block;
        }
    }
</style>
