---

---

<div id="preloader" class="preloader">
    <div class="preloader-content">
        <img
            src="/ck-logo-peru.webp"
            alt="CONKRET Logo"
            class="preloader-logo"
        />
        <div class="spinner"></div>
    </div>
</div>

<style>
    .preloader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: #ffffff;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        transition:
            opacity 0.8s ease-out,
            visibility 0.8s;
    }

    .preloader-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 2rem;
    }

    .preloader-logo {
        width: 250px;
        height: auto;
        animation: scale-up 1.2s ease-out forwards;
    }

    .spinner {
        width: 50px;
        height: 50px;
        border: 4px solid rgba(228, 3, 35, 0.1);
        border-top: 4px solid var(--color-primary, #e40323);
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        0% {
            transform: rotate(0deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }

    @keyframes scale-up {
        0% {
            transform: scale(0.8);
            opacity: 0;
        }
        100% {
            transform: scale(1);
            opacity: 1;
        }
    }

    .preloader.fade-out {
        opacity: 0;
        visibility: hidden;
    }
</style>

<script>
    function hidePreloader() {
        const preloader = document.getElementById("preloader");
        if (preloader) {
            setTimeout(() => {
                preloader.classList.add("fade-out");
                // Remove from DOM after transition to avoid blocking interaction
                setTimeout(() => {
                    preloader.style.display = "none";
                }, 800);
            }, 1200); // 1.2 seconds delay as requested
        }
    }

    // Runs on initial load and after ViewTransitions swaps
    document.addEventListener("astro:page-load", () => {
        // Only run preloader on homepage
        if (
            window.location.pathname === "/" ||
            window.location.pathname === "/index.html"
        ) {
            hidePreloader();
        } else {
            // Instantly hide if not on homepage
            const preloader = document.getElementById("preloader");
            if (preloader) preloader.style.display = "none";
        }
    });
</script>
