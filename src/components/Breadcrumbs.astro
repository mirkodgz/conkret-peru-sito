---
interface Props {
    items: { label: string; href?: string }[];
}

const { items } = Astro.props;

// JSON-LD BreadcrumbList
const breadcrumbSchema = {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    itemListElement: items.map((item, index) => ({
        "@type": "ListItem",
        position: index + 1,
        name: item.label,
        item: item.href ? new URL(item.href, Astro.url.origin).href : undefined,
    })),
};
---

<nav aria-label="Breadcrumb" class="breadcrumbs">
    <ol>
        <li><a href="/">Inicio</a></li>
        {
            items.map((item, index) => (
                <li>
                    {index < items.length - 1 ? (
                        <a href={item.href}>{item.label}</a>
                    ) : (
                        <span aria-current="page">{item.label}</span>
                    )}
                </li>
            ))
        }
    </ol>
</nav>

<script
    type="application/ld+json"
    set:html={JSON.stringify(breadcrumbSchema)}
/>

<style>
    .breadcrumbs {
        padding: 1rem 0;
        font-size: 0.9rem;
        color: #666;
    }
    .breadcrumbs ol {
        list-style: none;
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
    }
    .breadcrumbs li:not(:last-child)::after {
        content: "/";
        margin-left: 0.5rem;
        color: #ccc;
    }
    .breadcrumbs a:hover {
        color: var(--color-primary);
    }
    .breadcrumbs [aria-current="page"] {
        color: #1a1a1a;
        font-weight: 400;
    }
</style>
